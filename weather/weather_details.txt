Comment ce module doit marcher niveau utilsateur? : 
  - Un mode par défaut qui utilise soit PVGIS soit un fournisseur d'irradiance par défaut et on la convertit en production PV
  - L'utilisateur choisira entre ces providers si mode par défaut.
  - Possibilité d'iutiliser un fournisseur avec lequel l'utilisteur a un contrat, donc proposition de quelques 4 ou 5 providers.
  - Un modèle de machine learning qui apprend les erreurs dans la prévision à partir des données mesurées directement par le routeur. 

Ce troisième choix sera optionnel, il concerne les deux cas, mode par défaut & le mode de l'API user. 

Toutes ces données seront stockées dans la BDD que ce soit pour les statistiques, ou bien pour entraîner le modèle IA 

Fonctionnalités possibles : 
  - Le modèle IA compare les différentes providers et décide selon celui qui est le plus proche de la réalité. 
  - Dans le cas de l'API de l'utilisateur, basculer en choix public si limite atteinte... 
  - Dans le mode par défaut, possibilité de choisir une option la plus historiquement de la réalité (le plus faible écart mesure & réalité).
  - Mesure automatique du rendement après quelques heures de marche du logiciel / routeur. 



Configurations possibles : 
   - Pas de temps (dans la limit du possible) 
   - Fréquence de rafraichissement. 
   - Longueur de l'horizon (ex. 24h ...), cela doit être compatible avec longueur de l'horizon du programme moteur.

Idée de base de ce module weather : 
      Une fonction d'entrée main_weather() qui, lorsque appelé, charge les configs, appelle les providers concernés, 
      fait passer les données par la couche IA, ensuite remplit la table weather dans la BDD. 


Scénarios possibles : 
 - Mode par défaut : L'utilisateur s'en fiche de comment on gère la météo. Aucune fonctionalité n'est choisie. 
     Dans ce cas, le programme cherche le fournisseur le plus crédible et stocke dans la BDD les données de production associée. 
 _ Mode par défaut + Sélction intelligente du fournisseur : ça marche après quelques jours de fonctionnement.
     L'idée c'est que le programme tire les données de toutes les fournsiseurs et ensuite compare les données historiques et sélectionne 
     les données du fournsiseur qui a le plus souvent raison. 
 - Mode par défaut + ajustement automatique du rendement maison : ça marche surtout que les données des fournsiseurs sont proches. 
     L'idée c'est de comparer données historiques de production réelle & prévue, corriger le taux de rendement des panneaux / réseau
 - Mode fournisseur de l'utilisateur : Si l'utilisateur a déjà un contrat -> Il donne les données nécessaires, clés... et le programme s'occupe 
    Il y aura possibilité de saisir manuellement des données prévues avec averissement si les données sont incohérentes. 
 - Surcouche Machine learning : Pour toutes les modes qu'on a cité avant, cette surcouche sert à corriger les erreurs historiques 
    elle prend en compte énormément de paramètres qui peuvent jouer sur les erruers, temps de la journée, nuages surprises... 



Étapes du programme : 

Scénario par défaut : 
1) Chargement de la config
2) Consulter le ranking des fournisseurs
3) Appeler le fournisseur 1, si ça tombe, le fournisseur 2, sinon 3.... 
4) Si aucun ne marche, avertir l'utilisateur et couper le programme. 
5) Mettre à jour les données dans la BDD. 

Scénario par défaut + Ajustement du ranking : 
1) Chargement de la config
2) Consulter les données historiques mesurées dans la BDD & prévisions anciennes
3) Mettre à jour le ranking
4) Reprendre le processus d'avant : Appeler dans l'ordre les fournisseurs, sauf qu'ici on va les appeler tous car on a besoin de remplir toutes les colonnes. (pour réajuster efficacement le ranking)

5) Mettre à jour les données dans la BDD

Scénario par défaut + ajustement du rendement : 
1) Chargement de la config
2) Consulter données historiques mesurées vs prévisions
3) Recalculer le rendement de manière à rendre les anciennes prévisions correctes
4) Consulter le ranking
5) Mettre à jour la BDD

Scénario fournisseur de l'utilisateur (automatique) 
1) Chargement de la config
2) Chargement d'un autre fichier de config lié au fournisseur (ceci est fait car les utilisateurs qui vont utiliser un fournisseur tiers sont rares donc inutiles de mélanger les données avec les trucs globales
3) Appeler ce fournisseur, 
4) Si celui ci tombe faire la même chose qu'avant (consulter le ranking...) 
5) Mettre à jour la BDD

Scénario fournisseur de l'utilisateur (manuel) 
1) Chargement de la config
2) Là on va comprendre que l'utilisateur veut remplir la BDD des prévisions manuellement
3) Il y aura un programme dans l'interface qui gère ça
3) On consulte le ranking pour ajuster une colonne de secours dans la BDD (comme ça si l'utilisateur a oublié de mettre les données)
4) Même logique qu'avant
5) Mettre à jour la BDD
